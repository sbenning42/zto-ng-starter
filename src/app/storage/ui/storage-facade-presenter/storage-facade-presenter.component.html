<section class="card flex-row-cc">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        Storage Facade Presenter
      </mat-card-title>
      <mat-card-subtitle>
        Storage {{ loaded ? 'Loaded' : 'Not Loaded' }}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <h3>Storage Entries</h3>
      <mat-list>
        <mat-list-item *ngFor="let entry of entriesAsArray; let index = index">
          <section class="flex-row-cs">
            <i>{{entry[0]}}:</i>
            <span style="flex: 1"></span>
            <b>{{entry[1]}}</b>
            <span style="flex: 1"></span>
            <button mat-button color="warn" *ngIf="removeClosed" (click)="remove(index, [entry[0]])">DELETE</button>
            <button mat-button color="warn" *ngIf="!removeClosed && indexRemoving !== index" [disabled]="true">DELETE</button>
            <button mat-button color="warn" *ngIf="!removeClosed && indexRemoving === index" (click)="cancelRemove()">CANCEL DELETE</button>
            <button mat-button color="accent" *ngIf="!removeClosed && indexRemoving === index && !removePaused" (click)="pauseRemove()">RESUME DELETE</button>
            <button mat-button color="accent" *ngIf="!removeClosed && indexRemoving === index && removePaused" (click)="resumeRemove()">RESUME DELETE</button>
          </section>
        </mat-list-item>
      </mat-list>
      <h3>Add Storage Entry</h3>
      <form [formGroup]="saveForm">
        <mat-form-field>
          <input matInput type="text" placeholder="Entry Key *" formControlName="key">
          <mat-error *ngIf="keyControl.invalid && keyControl.hasError('required')">An Entry Key is required</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput type="text" placeholder="Entry value *" formControlName="value">
          <mat-error *ngIf="valueControl.invalid && valueControl.hasError('required')">An Entry Value is required</mat-error>
        </mat-form-field>
        <button mat-button color="primary" (click)="save()" *ngIf="saveClosed" [disabled]="saveForm.invalid">SAVE</button>
        <button mat-button color="accent" (click)="cancelSave()" *ngIf="!saveClosed">CANCEL SAVE</button>
        <button mat-button color="accent" (click)="pauseSave()" *ngIf="!saveClosed && !savePaused">PAUSE SAVE</button>
        <button mat-button color="accent" (click)="resumeSave()" *ngIf="!saveClosed && savePaused">RESUME SAVE</button>
      </form>
    </mat-card-content>
    <mat-card-actions class="flex-row-cs">
      <button mat-button color="primary" (click)="load()" *ngIf="loadClosed">LOAD</button>
      <button mat-button color="accent" (click)="cancelLoad()" *ngIf="!loadClosed">CANCEL LOAD</button>
      <button mat-button color="accent" (click)="pauseLoad()" *ngIf="!loadClosed && !loadPaused">PAUSE LOAD</button>
      <button mat-button color="accent" (click)="resumeLoad()" *ngIf="!loadClosed && loadPaused">RESUME LOAD</button>

      <button mat-button color="warn" (click)="clear()" *ngIf="clearClosed">CLEAR</button>
      <button mat-button color="accent" (click)="cancelClear()" *ngIf="!clearClosed">CANCEL CLEAR</button>
      <button mat-button color="accent" (click)="pauseClear()" *ngIf="!clearClosed && !clearPaused">PAUSE CLEAR</button>
      <button mat-button color="accent" (click)="resumeClear()" *ngIf="!clearClosed && clearPaused">RESUME CLEAR</button>
    </mat-card-actions>
  </mat-card>
</section>
